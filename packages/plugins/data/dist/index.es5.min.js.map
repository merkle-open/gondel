{"version":3,"file":"index.es5.min.js","sources":["serializer/JSON.js","serializer/all.js","DataPlugin.js","DataDecorator.js"],"sourcesContent":["export var serialize = function (value) { return (value ? JSON.stringify(value) : \"\"); };\nexport var deserialize = function (value) {\n    return value ? JSON.parse(value) : void 0;\n};\n//# sourceMappingURL=JSON.js.map","var _a;\nimport { serialize as serializeJSON, deserialize as deserializeJSON } from \"./JSON\";\nexport var Serializer;\n(function (Serializer) {\n    Serializer[\"JSON\"] = \"JSON\";\n})(Serializer || (Serializer = {}));\nexport var Serializers = (_a = {},\n    _a[Serializer.JSON] = {\n        serialize: serializeJSON,\n        deserialize: deserializeJSON\n    },\n    _a);\n//# sourceMappingURL=all.js.map","import { addGondelPluginEventListener } from \"@gondel/core\";\nimport { Serializers } from \"./serializer/all\";\nexport var areDataBindingsHookedIntoCore = false;\nexport function hookDataDecoratorIntoCore() {\n    areDataBindingsHookedIntoCore = true;\n    addGondelPluginEventListener(\"start\", function (gondelComponents, _, next) {\n        gondelComponents.forEach(function (gondelComponent) {\n            var componentDataBindings = (gondelComponent.prototype && gondelComponent.prototype.__dataBindings) ||\n                gondelComponent.__dataBindings;\n            if (!componentDataBindings || componentDataBindings.length === 0) {\n                return next(gondelComponents);\n            }\n            componentDataBindings.forEach(function (_a) {\n                var propertyKey = _a[0], attributeKey = _a[1], customSerializer = _a[2];\n                var serializer;\n                if (customSerializer) {\n                    if (typeof customSerializer !== \"object\") {\n                        serializer = Serializers[customSerializer];\n                    }\n                    else {\n                        serializer = customSerializer;\n                    }\n                }\n                Object.defineProperty(gondelComponent, propertyKey, {\n                    enumerable: true,\n                    configurable: false,\n                    get: function () {\n                        var value = gondelComponent._ctx.getAttribute(\"data-\" + attributeKey);\n                        if (serializer && value) {\n                            return serializer.deserialize(value);\n                        }\n                        return value;\n                    },\n                    set: function (value) {\n                        if (serializer) {\n                            value = serializer.serialize(value);\n                        }\n                        gondelComponent._ctx.setAttribute(\"data-\" + attributeKey, value);\n                    }\n                });\n            });\n        });\n        next(gondelComponents);\n    });\n}\n//# sourceMappingURL=DataPlugin.js.map","import { areDataBindingsHookedIntoCore, hookDataDecoratorIntoCore } from \"./DataPlugin\";\n/**\n * The @data prop decorator will save the selected value into the given variable at start\n */\nexport function data(attributeKey, serializer) {\n    return function (target, propertyKey) {\n        if (!areDataBindingsHookedIntoCore) {\n            // prevent multiple hook listeners\n            hookDataDecoratorIntoCore();\n        }\n        if (!target.__dataBindings) {\n            target.__dataBindings = [];\n        }\n        target.__dataBindings.push([propertyKey, attributeKey, serializer]);\n    };\n}\n//# sourceMappingURL=DataDecorator.js.map"],"names":["_a","Serializer","Serializers","JSON","serialize","value","stringify","deserialize","parse","areDataBindingsHookedIntoCore","attributeKey","serializer","target","propertyKey","addGondelPluginEventListener","gondelComponents","_","next","forEach","gondelComponent","componentDataBindings","prototype","__dataBindings","length","customSerializer","Object","defineProperty","enumerable","configurable","get","_ctx","getAttribute","set","setAttribute","push"],"mappings":"qPAAO,ICAHA,GAKDC,eAAeA,aAAa,KADV,KAAI,OAElB,IAAIC,IAAeF,EAAK,IACxBC,aAAWE,MAAQ,CAClBC,UDRe,SAAUC,GAAS,OAAQA,EAAQF,KAAKG,UAAUD,GAAS,ICS1EE,YDRiB,SAAUF,GAC/B,OAAOA,EAAQF,KAAKK,MAAMH,QAAS,ICSnCL,GCTOS,GAAgC,SCEpC,SAAcC,EAAcC,GAC/B,OAAO,SAAUC,EAAQC,GAChBJ,IDFTA,GAAgC,EAChCK,+BAA6B,QAAS,SAAUC,EAAkBC,EAAGC,GACjEF,EAAiBG,QAAQ,SAAUC,GAC/B,IAAIC,EAAyBD,EAAgBE,WAAaF,EAAgBE,UAAUC,gBAChFH,EAAgBG,eACpB,IAAKF,GAA0D,IAAjCA,EAAsBG,OAChD,OAAON,EAAKF,GAEhBK,EAAsBF,QAAQ,SAAUlB,GACpC,IACIW,EADAE,EAAcb,EAAG,GAAIU,EAAeV,EAAG,GAAIwB,EAAmBxB,EAAG,GAEjEwB,IAEIb,EAD4B,iBAArBa,EACMtB,EAAYsB,GAGZA,GAGrBC,OAAOC,eAAeP,EAAiBN,EAAa,CAChDc,YAAY,EACZC,cAAc,EACdC,IAAK,WACD,IAAIxB,EAAQc,EAAgBW,KAAKC,aAAa,QAAUrB,GACxD,OAAIC,GAAcN,EACPM,EAAWJ,YAAYF,GAE3BA,GAEX2B,IAAK,SAAU3B,GACPM,IACAN,EAAQM,EAAWP,UAAUC,IAEjCc,EAAgBW,KAAKG,aAAa,QAAUvB,EAAcL,UAK1EY,EAAKF,MChCAH,EAAOU,iBACRV,EAAOU,eAAiB,IAE5BV,EAAOU,eAAeY,KAAK,CAACrB,EAAaH,EAAcC"}