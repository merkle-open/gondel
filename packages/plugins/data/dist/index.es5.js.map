{"version":3,"file":"index.es5.js","sources":["serializer/JSON.js","serializer/all.js","DataPlugin.js","DataDecorator.js","index.js"],"sourcesContent":["export var serialize = function (value) { return (value ? JSON.stringify(value) : \"\"); };\nexport var deserialize = function (value) {\n    return value ? JSON.parse(value) : void 0;\n};\n//# sourceMappingURL=JSON.js.map","var _a;\nimport { serialize as serializeJSON, deserialize as deserializeJSON } from \"./JSON\";\nexport var Serializer;\n(function (Serializer) {\n    Serializer[\"JSON\"] = \"JSON\";\n})(Serializer || (Serializer = {}));\nexport var Serializers = (_a = {},\n    _a[Serializer.JSON] = {\n        serialize: serializeJSON,\n        deserialize: deserializeJSON\n    },\n    _a);\n//# sourceMappingURL=all.js.map","import { addGondelPluginEventListener } from \"@gondel/core\";\nimport { Serializers } from \"./serializer/all\";\nexport var areDataBindingsHookedIntoCore = false;\nexport function hookDataDecoratorIntoCore() {\n    areDataBindingsHookedIntoCore = true;\n    addGondelPluginEventListener(\"start\", function (gondelComponents, _, next) {\n        gondelComponents.forEach(function (gondelComponent) {\n            var componentDataBindings = (gondelComponent.prototype && gondelComponent.prototype.__dataBindings) ||\n                gondelComponent.__dataBindings;\n            if (!componentDataBindings || componentDataBindings.length === 0) {\n                return next(gondelComponents);\n            }\n            componentDataBindings.forEach(function (_a) {\n                var propertyKey = _a[0], attributeKey = _a[1], customSerializer = _a[2];\n                var serializer;\n                if (customSerializer) {\n                    if (typeof customSerializer !== \"object\") {\n                        serializer = Serializers[customSerializer];\n                    }\n                    else {\n                        serializer = customSerializer;\n                    }\n                }\n                Object.defineProperty(gondelComponent, propertyKey, {\n                    enumerable: true,\n                    configurable: false,\n                    get: function () {\n                        var value = gondelComponent._ctx.getAttribute(\"data-\" + attributeKey);\n                        if (serializer && value) {\n                            return serializer.deserialize(value);\n                        }\n                        return value;\n                    },\n                    set: function (value) {\n                        if (serializer) {\n                            value = serializer.serialize(value);\n                        }\n                        gondelComponent._ctx.setAttribute(\"data-\" + attributeKey, value);\n                    }\n                });\n            });\n        });\n        next(gondelComponents);\n    });\n}\n//# sourceMappingURL=DataPlugin.js.map","import { areDataBindingsHookedIntoCore, hookDataDecoratorIntoCore } from \"./DataPlugin\";\n/**\n * The @data prop decorator will save the selected value into the given variable at start\n */\nexport function data(attributeKey, serializer) {\n    return function (target, propertyKey) {\n        if (!areDataBindingsHookedIntoCore) {\n            // prevent multiple hook listeners\n            hookDataDecoratorIntoCore();\n        }\n        if (!target.__dataBindings) {\n            target.__dataBindings = [];\n        }\n        target.__dataBindings.push([propertyKey, attributeKey, serializer]);\n    };\n}\n//# sourceMappingURL=DataDecorator.js.map","// the main @data decorator\nexport { data } from \"./DataDecorator\";\n// serialization utilities\nexport { Serializer } from \"./serializer/all\";\n//# sourceMappingURL=index.js.map"],"names":["Serializer","serializeJSON","deserializeJSON","addGondelPluginEventListener"],"mappings":"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"}