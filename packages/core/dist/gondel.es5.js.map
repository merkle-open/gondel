{"version":3,"file":"gondel.es5.js","sources":["GondelPluginUtils.js","GondelEventEmitter.js","GondelComponentStarter.js","GondelComponentRegistry.js","GondelDomUtils.js","GondelEventRegistry.js","GondelDecorators.js","GondelComponent.js","index.js"],"sourcesContent":["var basePluginListener = function (result, data, next) { return next(result); };\n// Global plugin events registry\nexport var pluginEvents = window.__gondelPluginEvents || {};\nwindow.__gondelPluginEvents = pluginEvents;\nexport function fireGondelPluginEvent(eventName, initialValue, data, callback) {\n    var isSyncron = false;\n    var callbackResult;\n    // Execute all bound events for the given name\n    // if they exist\n    (pluginEvents[eventName] || basePluginListener)(initialValue, data, function (processedResult) {\n        isSyncron = true;\n        callbackResult = callback ? callback(processedResult) : processedResult;\n    });\n    // Add a guard to prevent asyncron plugin listeners\n    // to simplify the usage of fireGondelPluginEvent\n    if (!isSyncron) {\n        throw new Error(\"Async plugin listener\");\n    }\n    return callbackResult;\n}\n/**\n * Fire an async event which allows gondel plugins to add features to gondel\n */\nexport function fireAsyncGondelPluginEvent(eventName, initialValue, data) {\n    return new Promise(function (resolve) {\n        (pluginEvents[eventName] || basePluginListener)(initialValue, data, function (result) {\n            resolve(result);\n        });\n    });\n}\n/**\n * Allow plugins to hook into the gondel event system\n */\nexport function addGondelPluginEventListener(eventName, eventListenerCallback) {\n    if (!pluginEvents[eventName]) {\n        pluginEvents[eventName] = basePluginListener;\n    }\n    var previousEventHandler = pluginEvents[eventName];\n    pluginEvents[eventName] = function wrapCallback(result, data, next) {\n        previousEventHandler(result, data, function callNextPlugin(modifiedResult, _, firstNext) {\n            eventListenerCallback(modifiedResult, data, function bindData(result) {\n                next(result, data, firstNext);\n            });\n        });\n    };\n}\n//# sourceMappingURL=GondelPluginUtils.js.map","import { getFirstDomNode } from \"./GondelDomUtils\";\n/**\n * Submit an event which might be caught by foreign gondel, angular or react components\n */\nexport function triggerPublicEvent(eventName, gondelComponent, target, eventData, canBubble) {\n    if (eventData === void 0) { eventData = {}; }\n    if (canBubble === void 0) { canBubble = true; }\n    var event = document.createEvent(\"Event\");\n    var eventTarget = target ? getFirstDomNode(target) : gondelComponent._ctx;\n    if (eventName[0] !== gondelComponent._namespace) {\n        throw new Error(\"Invalid event name '\" +\n            eventName +\n            \"' - use '\" +\n            gondelComponent._namespace +\n            eventName.charAt(0).toUpperCase() +\n            eventName.slice(1) +\n            \"'\");\n    }\n    event.initEvent(eventName, canBubble, true);\n    event.data = {\n        component: gondelComponent,\n        name: gondelComponent._componentName,\n        namespace: gondelComponent._namespace,\n        eventData: eventData\n    };\n    return eventTarget.dispatchEvent(event);\n}\n//# sourceMappingURL=GondelEventEmitter.js.map","import { fireGondelPluginEvent } from \"./GondelPluginUtils\";\nimport { triggerPublicEvent } from \"./GondelEventEmitter\";\nvar noop = function () { };\nvar Deferred = function () {\n    var _this = this;\n    this.promise = new Promise(function (resolve) {\n        _this.resolve = resolve;\n    });\n};\n/**\n * Start all components of the gondel component registry\n * for the given dom context\n */\nexport function startComponentsFromRegistry(gondelComponentRegistry, domContext, namespace) {\n    // Get an array of all nodes which match the namespace\n    var gondelDomNodeList = Array.prototype.slice.call(domContext.querySelectorAll(\"[data-\" + namespace + \"-name]\"));\n    if (domContext.hasAttribute(\"data-\" + namespace + \"-name\")) {\n        gondelDomNodeList.push(domContext);\n    }\n    // Remove already booted nodes\n    var pristineGondelDomNodes = gondelDomNodeList.filter(function (gondelDomNode) {\n        return isPristineGondelDomNode(gondelDomNode, namespace);\n    });\n    var bootingDeferred = new Deferred();\n    // Mark all nodes as booting\n    pristineGondelDomNodes.forEach(function (gondelDomNode) {\n        attachGondelBootingFlag(gondelDomNode, bootingDeferred.promise, namespace);\n    });\n    // Create instances\n    var gondelComponents = fireGondelPluginEvent(\"boot\", pristineGondelDomNodes, { namespace: namespace }, function (pristineGondelDomNodes) {\n        return pristineGondelDomNodes.map(function (gondelDomNode) {\n            return constructComponent(gondelDomNode, gondelComponentRegistry, namespace);\n        });\n    });\n    // Get all component names\n    var newComponentNames = getNewComponents(gondelComponents, gondelComponentRegistry);\n    newComponentNames.forEach(function (componentName) {\n        return gondelComponentRegistry.setActiveState(componentName, true);\n    });\n    // Start all components\n    var gondelComponentStartPromise = fireGondelPluginEvent(\"start\", gondelComponents, { newComponentNames: newComponentNames, namespace: namespace, gondelComponentRegistry: gondelComponentRegistry }, function (gondelComponents) {\n        // Wait for async started components\n        return Promise.all(gondelComponents.map(startConstructedComponent));\n    })\n        // Let all plugins know that the components are now all ready to use\n        .then(function () {\n        gondelComponents.forEach(function (gondelComponent) {\n            if (gondelComponent.sync) {\n                gondelComponent.sync();\n            }\n        });\n        return fireGondelPluginEvent(\"sync\", gondelComponents, { namespace: namespace });\n    });\n    // Resolve the booting deferred\n    gondelComponentStartPromise.then(bootingDeferred.resolve, bootingDeferred.resolve);\n    // Return a promise of all started components\n    return gondelComponentStartPromise;\n}\n/**\n * Returns true if the given domNode is neither booting nor booted\n */\nexport function isPristineGondelDomNode(domNode, namespace) {\n    return !domNode.hasOwnProperty(\"_gondelA_\" + namespace);\n}\n/**\n * Mark the given dom node as controlled by gondel\n */\nexport function attachGondelBootingFlag(domNode, bootingFlag, namespace) {\n    // The name `A` mean async\n    // to allow waiting for asyncronous booted components\n    domNode[\"_gondelA_\" + namespace] = bootingFlag;\n}\n/**\n * Constructs a new component\n */\nexport function constructComponent(domNode, gondelComponentRegisty, namespace) {\n    var componentName = domNode.getAttribute(\"data-\" + namespace + \"-name\");\n    var GondelComponent = gondelComponentRegisty.getComponent(componentName);\n    if (GondelComponent === undefined) {\n        throw new Error(\"Failed to boot component - \" + componentName + \" is not registred\");\n    }\n    var componentInstance = new GondelComponent(domNode, componentName);\n    componentInstance._ctx = domNode;\n    componentInstance._namespace = namespace;\n    componentInstance._componentName = componentName;\n    // Add stop method\n    componentInstance.stop = stopStartedComponent.bind(null, componentInstance, componentInstance.stop || noop, namespace);\n    // Create a circular reference which will allow access to the componentInstance from ctx\n    domNode[\"_gondel_\" + namespace] = componentInstance;\n    return componentInstance;\n}\n/**\n * Start a component after it was constructed\n */\nexport function startConstructedComponent(component) {\n    // Skip if the start method is missing\n    if (!component.start) {\n        return;\n    }\n    var expectsNoArguments = component.start.length === 0;\n    // Start the component and expect a promise or a syncronous return value\n    // if the function expects no arguments\n    if (expectsNoArguments) {\n        return component.start();\n    }\n    return new Promise(function (resolve, reject) { return component.start(resolve, reject); });\n}\n/**\n * Stops a started component\n */\nexport function stopStartedComponent(component, internalStopMethod, namespace) {\n    triggerPublicEvent(namespace + \"Stop\", component, component._ctx);\n    // Remove the component instance from the html element\n    delete component._ctx[\"_gondel_\" + namespace];\n    delete component._ctx[\"_gondelA_\" + namespace];\n    component._stopped = true;\n    fireGondelPluginEvent(\"stop\", component, { namespace: namespace }, internalStopMethod.bind(component));\n}\n/**\n * Filters the given component list and returns the names of those components which have never been started before\n */\nfunction getNewComponents(components, registry) {\n    var componentNameHelper = {};\n    components.forEach(function (component) { return (componentNameHelper[component._componentName] = true); });\n    var componentNames = Object.keys(componentNameHelper);\n    return componentNames.filter(function (componentName) { return !registry._activeComponents[componentName]; });\n}\n//# sourceMappingURL=GondelComponentStarter.js.map","import { fireGondelPluginEvent } from \"./GondelPluginUtils\";\nvar GondelComponentRegistry = /** @class */ (function () {\n    function GondelComponentRegistry() {\n        this._components = {};\n        this._activeComponents = {};\n    }\n    GondelComponentRegistry.prototype.registerComponent = function (name, gondelComponent) {\n        this._components[name] = gondelComponent;\n    };\n    GondelComponentRegistry.prototype.unregisterComponent = function (name) {\n        delete this._components[name];\n    };\n    GondelComponentRegistry.prototype.getComponent = function (name) {\n        return this._components[name];\n    };\n    /**\n     * Set if a component is used\n     */\n    GondelComponentRegistry.prototype.setActiveState = function (name, isActive) {\n        this._activeComponents[name] = isActive;\n    };\n    return GondelComponentRegistry;\n}());\nexport { GondelComponentRegistry };\nexport var componentRegistries = (window.__gondelRegistries = window.__gondelRegistries || {});\nexport function registerComponent() {\n    var args = arguments;\n    // The componentName is always the first argument\n    var componentName = args[0];\n    // Use namespace from the second argument or fallback to the default \"g\" if it is missing\n    var namespace = typeof args[1] === \"string\" ? args[1] : \"g\";\n    // The last argument is always the component class\n    var component = args[args.length - 1];\n    if (!componentRegistries[namespace]) {\n        componentRegistries[namespace] = new GondelComponentRegistry();\n    }\n    // If this component was already registered we remove the previous one\n    // and notify all plugins - this is especially usefull for hot component replacement\n    if (componentRegistries[namespace].getComponent(componentName)) {\n        fireGondelPluginEvent(\"unregister\", component, { componentName: componentName, namespace: namespace });\n    }\n    // Let plugins know about the new component\n    fireGondelPluginEvent(\"register\", component, {\n        componentName: componentName,\n        namespace: namespace,\n        gondelComponentRegistry: componentRegistries[namespace]\n    }, function (component) {\n        componentRegistries[namespace].registerComponent(componentName, component);\n    });\n}\n//# sourceMappingURL=GondelComponentRegistry.js.map","import { startComponentsFromRegistry } from \"./GondelComponentStarter\";\nimport { componentRegistries } from \"./GondelComponentRegistry\";\n/**\n * Returns true if the given object is a single Element\n */\nfunction isElement(domNode) {\n    return domNode.nodeType !== undefined;\n}\n/**\n * This function normalizes takes one of the following:\n *  + document query result\n *  + dom node array\n *  + jquery object\n *  + a single dom node\n * and turns it into a single dom node\n */\nexport function getFirstDomNode(domNode) {\n    if (isElement(domNode)) {\n        return domNode;\n    }\n    return domNode[0];\n}\n/**\n * Start all nodes in the given context\n */\nexport function startComponents(domContext, namespace) {\n    if (namespace === void 0) { namespace = \"g\"; }\n    if (!componentRegistries[namespace]) {\n        return Promise.resolve([]);\n    }\n    var registry = componentRegistries[namespace];\n    return startComponentsFromRegistry(registry, domContext ? getFirstDomNode(domContext) : document.documentElement, namespace);\n}\n/**\n * Stop all nodes in the given context\n */\nexport function stopComponents(domContext, namespace) {\n    if (namespace === void 0) { namespace = \"g\"; }\n    var components = findComponents(domContext, undefined, namespace);\n    var rootComponent = domContext && getComponentByDomNode(domContext);\n    if (rootComponent) {\n        components.unshift(rootComponent);\n    }\n    components.forEach(function (component) { return component.stop(); });\n}\n/**\n * Returns the gondel instance for the given HtmlELement\n */\nexport function getComponentByDomNode(domNode, namespace) {\n    if (namespace === void 0) { namespace = \"g\"; }\n    var firstNode = getFirstDomNode(domNode);\n    var gondelComponent = firstNode[\"_gondel_\" + namespace];\n    // Stop if this dom node is not known to gondel\n    if (gondelComponent && gondelComponent._ctx) {\n        return gondelComponent;\n    }\n    return;\n}\n/**\n * Returns the gondel instance for the given HtmlELement once it is booted\n */\nexport function getComponentByDomNodeAsync(domNode, namespace) {\n    if (namespace === void 0) { namespace = \"g\"; }\n    var firstNode = getFirstDomNode(domNode);\n    var gondelComponent = firstNode[\"_gondelA_\" + namespace];\n    // Stop if this dom node is not known to gondel\n    if (!gondelComponent) {\n        return Promise.reject(undefined);\n    }\n    // or the component is already booted up return it\n    if (gondelComponent._ctx) {\n        return Promise.resolve(gondelComponent);\n    }\n    // Wait the component to boot up and return it\n    return gondelComponent.then(function () { return firstNode[\"_gondel_\" + namespace]; });\n}\n/**\n * Returns all components inside the given node\n */\nexport function findComponents(domNode, componentName, namespace) {\n    if (domNode === void 0) { domNode = document.documentElement; }\n    if (namespace === void 0) { namespace = \"g\"; }\n    var firstNode = getFirstDomNode(domNode);\n    var components = [];\n    var attribute = \"_gondel_\" + namespace;\n    var nodes = firstNode.querySelectorAll(\"[data-\" + namespace + \"-name\" + (componentName ? \"=\\\"\" + componentName + \"\\\"\" : \"\") + \"]\");\n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        var gondelComponentInstance = node[attribute];\n        // Verify that the component is fully booted\n        if (gondelComponentInstance && gondelComponentInstance._ctx === node) {\n            components.push(gondelComponentInstance);\n        }\n    }\n    return components;\n}\n//# sourceMappingURL=GondelDomUtils.js.map","/**\n * The event registry provides a way to bind events ahead of time\n * with a very small foot print during launch to improve the time to interaction\n */\nimport { getComponentByDomNode } from \"./GondelDomUtils\";\nimport { fireGondelPluginEvent } from \"./GondelPluginUtils\";\n/**\n * Only real browser events are supported.\n * Unfortunately focus and blur do not bubble so a special mapping is needed.\n */\nvar eventNameMapping = {\n    focus: \"focusin\",\n    blur: \"focusout\"\n};\nvar domEventRegistry = window.__gondelDomEvents || {};\nwindow.__gondelDomEvents = domEventRegistry;\n/* istanbul ignore next : Browser polyfill can't be tested */\nvar matches = Element.prototype.matches ||\n    Element.prototype.matchesSelector ||\n    Element.prototype.mozMatchesSelector ||\n    Element.prototype.msMatchesSelector ||\n    Element.prototype.oMatchesSelector ||\n    Element.prototype.webkitMatchesSelector;\nfunction getParentElements(startElement) {\n    var nodes = [];\n    for (var element = startElement; element; element = element.parentElement) {\n        nodes.push(element);\n    }\n    return nodes;\n}\n/**\n * Returns an array of all handlers which would apply for the current target\n */\nexport function getHandlers(attributeName, eventHandlerRegistry, target) {\n    var parents = getParentElements(target);\n    // Find all selectors which have been registred for this event type\n    // and which have a gondel component in one of the parrent nodes\n    var selectorsOfFoundComponents = [];\n    parents.forEach(function (parent, i) {\n        var componentName = parent.getAttribute(attributeName);\n        var handlers = componentName && eventHandlerRegistry[componentName];\n        if (handlers) {\n            // Store the index where the component was found to know in which part\n            // of the dom tree the selectors could be found\n            selectorsOfFoundComponents.push({ index: i, handlers: handlers });\n        }\n    });\n    // Iterate over all possible selectors to find out if the current event\n    // should fire any gondel handler\n    var handlerQueue = [];\n    selectorsOfFoundComponents.forEach(function (_a) {\n        var index = _a.index, handlers = _a.handlers;\n        var selectorNames = Object.keys(handlers);\n        selectorNames.forEach(function (selectorName) {\n            // If no selector is given the handler does always match\n            if (!selectorName) {\n                return handlerQueue.push({\n                    index: index,\n                    ctx: parents[index],\n                    handlerOptions: handlers[selectorName]\n                });\n            }\n            // Iterate backwards over the children of the component to find an element\n            // which matches the selector for the current handler\n            for (var i = index; --i >= 0;) {\n                if (matches.call(parents[i], selectorName)) {\n                    return handlerQueue.push({\n                        index: i,\n                        ctx: parents[index],\n                        handlerOptions: handlers[selectorName]\n                    });\n                }\n            }\n        });\n    });\n    // Break if we couldn't find any matching element\n    if (handlerQueue.length === 0) {\n        return [];\n    }\n    // Sort the queue so events which are further up the dom are fired first\n    handlerQueue.sort(function (handlerA, handlerB) {\n        return handlerA.index > handlerB.index ? 1 : handlerA.index === handlerB.index ? 0 : -1;\n    });\n    return handlerQueue;\n}\n/**\n * The handler which will catch every event at the documentElement\n */\nfunction handleEvent(namespace, attributeName, eventHandlerRegistry, event) {\n    var target = event.target;\n    var handlers = getHandlers(attributeName, eventHandlerRegistry, target);\n    executeHandlers(handlers, event, namespace);\n}\n/**\n * Returns the namespace registry for the given namespace..\n * This function must be used only by core or plugins\n */\nexport function getEventRegistry(namespace) {\n    if (!domEventRegistry[namespace]) {\n        domEventRegistry[namespace] = {};\n    }\n    return domEventRegistry[namespace];\n}\n/**\n * Notify components\n * This function must be used by core or only by plugins\n */\nexport function executeHandlers(handlers, event, namespace) {\n    var results = [];\n    for (var i = 0; i < handlers.length && !event.cancelBubble; i++) {\n        var handlerObject = handlers[i];\n        var handlerOptions = handlerObject.handlerOptions;\n        var gondelComponent = getComponentByDomNode(handlerObject.ctx, namespace);\n        // Skip if the component wasn't started or if it was stopped\n        if (gondelComponent) {\n            for (var j = 0; j < handlerOptions.length && !event.cancelBubble; j++) {\n                var handlerResult = gondelComponent[handlerOptions[j].handlerName].call(gondelComponent, event);\n                if (typeof handlerResult === \"function\") {\n                    results.push(handlerResult);\n                }\n            }\n        }\n    }\n    // Execute all callbacks to allow grouping write events\n    results.forEach(function (result) {\n        result();\n    });\n}\n/**\n * Add a event lister to the <html> element\n * The listener will always call handleEvent with the domEventRegistry for the given event\n */\nfunction startListeningForEvent(eventName, namespace) {\n    document.documentElement.addEventListener(eventNameMapping[eventName] || eventName, handleEvent.bind(null, namespace, \"data-\" + namespace + \"-name\", domEventRegistry[namespace][eventName]));\n}\n/**\n * Add an event to the Gondel EventRegistry\n */\nexport function addRootEventListener(namespace, domEventName, gondelComponentName, handlerName, handlerOption) {\n    // Create namespace if neededi\n    var namespacedDomEventRegistry = getEventRegistry(namespace);\n    // Notify all plugins to allow taking over the event handling for a specific event name\n    // This notification is only triggered if a event name e.g. 'click' is used for the first time\n    if (!namespacedDomEventRegistry[domEventName]) {\n        namespacedDomEventRegistry[domEventName] = {};\n        fireGondelPluginEvent(\"registerEvent\", true, {\n            eventName: domEventName,\n            namespace: namespace,\n            eventRegistry: namespacedDomEventRegistry[domEventName]\n        }, function (isNativeEvent) {\n            // If no plugin registered the event\n            // register a native browser event\n            if (isNativeEvent) {\n                startListeningForEvent(domEventName, namespace);\n            }\n        });\n    }\n    if (!namespacedDomEventRegistry[domEventName][gondelComponentName]) {\n        namespacedDomEventRegistry[domEventName][gondelComponentName] = {};\n    }\n    var handlerOptionObject = typeof handlerOption === \"object\" ? handlerOption : { selector: handlerOption };\n    var selectorKey = handlerOptionObject.selector || \"\";\n    if (!namespacedDomEventRegistry[domEventName][gondelComponentName][selectorKey]) {\n        namespacedDomEventRegistry[domEventName][gondelComponentName][selectorKey] = [];\n    }\n    namespacedDomEventRegistry[domEventName][gondelComponentName][selectorKey].push(Object.assign({ handlerName: handlerName, handlerOption: handlerOption }));\n}\n/**\n * Remove an event from the Gondel EventRegistry\n */\nexport function removeRootEventListener(namespace, domEventName, gondelComponentName, handlerName, selector) {\n    var selectorKey = selector || \"\";\n    var namespacedDomEventRegistry = getEventRegistry(namespace);\n    if (namespacedDomEventRegistry[domEventName] &&\n        namespacedDomEventRegistry[domEventName][gondelComponentName] &&\n        namespacedDomEventRegistry[domEventName][gondelComponentName][selectorKey]) {\n        namespacedDomEventRegistry[domEventName][gondelComponentName][selectorKey] = namespacedDomEventRegistry[domEventName][gondelComponentName][selectorKey].filter(function (handlerOption) {\n            return handlerOption.handlerName !== handlerName || handlerName === undefined;\n        });\n    }\n}\n/**\n * Remove all events for a given Component (e.g. a Button) from the Gondel EventRegistry\n */\nexport function removeRootEventListernerForComponent(namespace, gondelComponentName) {\n    var namespacedDomEventRegistry = getEventRegistry(namespace);\n    for (var eventName in namespacedDomEventRegistry) {\n        /* istanbul ignore else: for in savety check */\n        if (namespacedDomEventRegistry.hasOwnProperty(eventName)) {\n            delete namespacedDomEventRegistry[eventName][gondelComponentName];\n        }\n    }\n}\n//# sourceMappingURL=GondelEventRegistry.js.map","import { addRootEventListener, removeRootEventListernerForComponent } from \"./GondelEventRegistry\";\n// Because of how decorators work @EventListeners is executed before the class is registred\n// so we need to provide a hrm compatible approch initialize and reinitialize the events\nimport { addGondelPluginEventListener } from \"./GondelPluginUtils\";\nimport { registerComponent } from \"./index\";\nexport function Component(componentName, namespace) {\n    return function (constructor) {\n        registerComponent(componentName, namespace, constructor);\n    };\n}\nvar areEventsHookedIntoCore = false;\nfunction hookEventDecoratorInCore() {\n    areEventsHookedIntoCore = true;\n    addGondelPluginEventListener(\"register\", function (component, _a, next) {\n        var componentName = _a.componentName, namespace = _a.namespace, gondelComponentRegistry = _a.gondelComponentRegistry;\n        // Only apply in case the component is already active in the DOM\n        // this will only happen during hot module replacement\n        if (!gondelComponentRegistry._activeComponents[componentName]) {\n            return next(component);\n        }\n        // The decorator will store the event information in two different places.\n        // For ES6 classes it is using __events\n        // For ES5 prototype classes and transpiled ES6 classes it is using prototype.__events\n        var componentEventOptions = (component.prototype && component.prototype.__events) || component.__events;\n        if (componentEventOptions) {\n            componentEventOptions.forEach(function (eventOptions) {\n                addRootEventListener(namespace, \n                /* event name: */ eventOptions[0], componentName, \n                /* handler: */ eventOptions[1], \n                /* selector: */ eventOptions[2]);\n            });\n        }\n        next(component);\n    });\n    addGondelPluginEventListener(\"unregister\", function (component, _a, next) {\n        var componentName = _a.componentName, namespace = _a.namespace;\n        removeRootEventListernerForComponent(namespace, componentName);\n        next(component);\n    });\n    addGondelPluginEventListener(\"start\", function (gondelComponents, _a, next) {\n        var newComponentNames = _a.newComponentNames, gondelComponentRegistry = _a.gondelComponentRegistry, namespace = _a.namespace;\n        var components = newComponentNames.forEach(function (componentName) {\n            var gondelComponent = gondelComponentRegistry.getComponent(componentName);\n            // The decorator will store the event information in two different places.\n            // For ES6 classes it is using __events\n            // For ES5 prototype classes and transpiled ES6 classes it is using prototype.__events\n            var componentEventOptions = (gondelComponent.prototype && gondelComponent.prototype.__events) ||\n                gondelComponent.__events;\n            if (componentEventOptions) {\n                componentEventOptions.forEach(function (eventOptions) {\n                    addRootEventListener(namespace, \n                    /* event name: */ eventOptions[0], componentName, \n                    /* handler: */ eventOptions[1], \n                    /* selector: */ eventOptions[2]);\n                });\n            }\n        });\n        next(gondelComponents);\n    });\n}\n/**\n * The @EventListener decorator will add all event names to a static variable\n */\nexport function EventListener(eventName, selector) {\n    return function (target, handler) {\n        if (!areEventsHookedIntoCore) {\n            hookEventDecoratorInCore();\n        }\n        if (handler.substr(0, 1) !== \"_\") {\n            throw new Error(\"Invalid handler name '\" + handler + \"' use '_\" + handler + \"' instead.\");\n        }\n        if (!target.__events) {\n            target.__events = [];\n        }\n        target.__events.push([eventName, handler, selector]);\n    };\n}\n//# sourceMappingURL=GondelDecorators.js.map","var GondelBaseComponent = /** @class */ (function () {\n    function GondelBaseComponent() {\n    }\n    /**\n     * Stop method\n     */\n    GondelBaseComponent.prototype.stop = function () { };\n    return GondelBaseComponent;\n}());\nexport { GondelBaseComponent };\n//# sourceMappingURL=GondelComponent.js.map","// Export helpers to hook into the gondel frameworks (should only be used by plugins)\nexport { addGondelPluginEventListener } from \"./GondelPluginUtils\";\n// Export helpers to interact with DOM e.g. start a gondel component for a given DOM node\n// or get a running gondel component instance for a given DOM node\nexport * from \"./GondelDomUtils\";\n// Export https://github.com/tc39/proposal-decorators decorators e.g. @EventListener or @Component\nexport * from \"./GondelDecorators\";\n// Export event helpers to send custom events to React/Angular or foreign gondel components\nexport * from \"./GondelEventEmitter\";\n// Export types of the Gondel Component instance\nexport * from \"./GondelComponent\";\n// Export a helper which allows registring components without using decorators\nexport { registerComponent } from \"./GondelComponentRegistry\";\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":"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"}